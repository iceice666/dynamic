---
import I18nText from '$/components/I18nText.astro';
import { formatDate } from '$/utils';

interface Props {
  title: string;
  description?: string;
  slug: string;
  publishedAt: Date;
  tags: string[];
  categoryName?: string;
}

const { title, description, slug, publishedAt, tags, categoryName } = Astro.props;

const articlePath = `/articles/${slug}`;
---

<article class="card">
  <div class="label-uppercase">
    {
      categoryName ? (
        <>
          <I18nText k="article_label" />
          {` Â· ${categoryName}`}
        </>
      ) : (
        <I18nText k="article_label" />
      )
    }
  </div>
  <h2 class="m-0 text-[1.0625rem] leading-[1.3] font-bold">
    <a href={articlePath} class="link-accent">{title}</a>
  </h2>
  {
    description && (
      <p class="excerpt text-muted m-0 overflow-hidden text-sm leading-normal">{description}</p>
    )
  }
  <div class="flex flex-wrap items-center gap-2">
    <div class="flex flex-wrap gap-1.5">
      {
        tags.map((tag) => (
          <a href={`/search?q=%23${tag}`} class="tag-link">
            #{tag}
          </a>
        ))
      }
    </div>
    <div class="flex-1"></div>
    <time class="text-muted text-xs" datetime={publishedAt.toISOString()}
      >{formatDate(publishedAt)}</time
    >
  </div>
</article>
