---
import type { Friend } from '$/types';
import { socialHref, socialIcon } from '$/utils/social';
import * as LucideIcons from 'lucide-react';

interface Props {
  friend: Friend;
}

const { friend } = Astro.props;
---

<article class="card">
  <div class="flex items-start gap-3">
    <a href={friend.url} target="_blank" rel="noopener noreferrer" class="shrink-0">
      <img
        class="border-border block h-12 w-12 rounded-full border-2 object-cover"
        src={friend.img}
        alt={`${friend.name} avatar`}
        width="48"
        height="48"
      />
    </a>
    <div class="flex min-w-0 flex-col gap-1">
      <a
        href={friend.url}
        target="_blank"
        rel="noopener noreferrer"
        class="link-accent flex items-center gap-1 text-[0.9375rem] font-semibold"
      >
        {friend.name}
        <LucideIcons.ExternalLink size={14} className="shrink-0" aria-hidden="true" />
      </a>
      <p class="text-muted m-0 text-sm leading-relaxed">
        {friend.desc}
      </p>
      <div class="mt-0.5 flex gap-2">
        {
          friend.socials.map((link) => (
            <a
              href={socialHref(link)}
              class="text-muted hover:text-accent flex items-center transition-colors duration-150"
              aria-label={link.kind}
              target={link.kind === 'email' ? undefined : '_blank'}
              rel={link.kind === 'email' ? undefined : 'noopener noreferrer'}
            >
              {(() => {
                const Icon = socialIcon(link);
                return <Icon size={16} className="shrink-0" aria-hidden="true" />;
              })()}
            </a>
          ))
        }
      </div>
    </div>
  </div>
</article>
