---
import ThemeButton from './ThemeButton';
import LanguageToggle from './LanguageToggle';
import NavSwitcher, { type NavSwitcherItem } from './NavSwitcher';
import { ui } from '../i18n/ui';

interface Props {
  currentPath: string;
}

const { currentPath } = Astro.props;

const navItems: NavSwitcherItem[] = [
  { labelEn: ui.en.nav_feed, labelZh: ui['zh-tw'].nav_feed, href: '/', icon: 'rss' },
  {
    labelEn: ui.en.nav_categories,
    labelZh: ui['zh-tw'].nav_categories,
    href: '/categories',
    icon: 'folder',
  },
  { labelEn: ui.en.nav_tags, labelZh: ui['zh-tw'].nav_tags, href: '/tags', icon: 'tag' },
  {
    labelEn: ui.en.nav_friends,
    labelZh: ui['zh-tw'].nav_friends,
    href: '/friends',
    icon: 'users',
  },
  {
    labelEn: ui.en.nav_archive,
    labelZh: ui['zh-tw'].nav_archive,
    href: '/archive',
    icon: 'archive',
  },
];
---

<nav class="left-nav flex h-full flex-col justify-between gap-4 px-4 py-6">
  <div class="left-nav-primary flex flex-col gap-6">
    <NavSwitcher client:load items={navItems} currentPath={currentPath} />
  </div>

  <div class="left-nav-controls flex flex-col gap-2">
    <ThemeButton client:load transition:persist />
    <LanguageToggle client:load transition:persist />
  </div>
</nav>

<style>
  @media (max-width: 640px) {
    .left-nav {
      flex-direction: row;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.5rem 0.75rem;
    }

    .left-nav-primary {
      flex: 1;
    }

    .left-nav-controls {
      display: none;
    }
  }
</style>
