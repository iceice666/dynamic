---
import { getAlternateLocaleURL, getLocaleFromURL } from '../i18n/index';
import { useTranslations } from '../i18n/index';

interface Props {
  currentPath: string;
}

const { currentPath } = Astro.props;
const locale = getLocaleFromURL(currentPath);
const t = useTranslations(locale);
const alternateURL = getAlternateLocaleURL(currentPath);
const isZhTW = locale === 'zh-tw';
---

<a
  href={alternateURL}
  class="lang-toggle flex w-full items-center gap-2 rounded-md p-2 text-sm text-muted no-underline transition-colors duration-150 hover:text-foreground"
  lang={isZhTW ? 'en' : 'zh-TW'}
>
  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <circle cx="12" cy="12" r="10"/>
    <path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/>
    <path d="M2 12h20"/>
  </svg>
  <span>{isZhTW ? t('nav_lang_toggle_zh') : t('nav_lang_toggle')}</span>
</a>
