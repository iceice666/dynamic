---
import { getAlternateLocaleURL, getLocaleFromURL } from '../i18n/index';
import { useTranslations } from '../i18n/index';
import { Globe } from 'lucide-react';

interface Props {
  currentPath: string;
}

const { currentPath } = Astro.props;
const locale = getLocaleFromURL(currentPath);
const t = useTranslations(locale);
const alternateURL = getAlternateLocaleURL(currentPath);
const isZhTW = locale === 'zh-tw';
---

<a
  href={alternateURL}
  class="lang-toggle text-muted hover:text-foreground flex w-full items-center gap-2 rounded-md p-2 text-sm no-underline transition-colors duration-150"
  lang={isZhTW ? 'en' : 'zh-TW'}
>
  <Globe size={18} aria-hidden="true" />
  <span>{isZhTW ? t('nav_lang_toggle_zh') : t('nav_lang_toggle')}</span>
</a>
